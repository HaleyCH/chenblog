@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  @font-face {
    font-family: "Geist";
    src: url("/fonts/geist-variable.woff2") format("woff2");
    font-display: swap;
  }
  @font-face {
    font-family: "Geist Mono";
    src: url("/fonts/geist-mono-variable.woff2") format("woff2");
    font-display: swap;
  }
  html.dark .astro-code,
  html.dark .astro-code span {
    color: var(--shiki-dark) !important;
    background-color: var(--shiki-dark-bg) !important;
    font-style: var(--shiki-dark-font-style) !important;
    font-weight: var(--shiki-dark-font-weight) !important;
    text-decoration: var(--shiki-dark-text-decoration) !important;
  }
}

@layer components {
  /* MarkdownÂÜÖÂÆπÂå∫ÔºåËá™Âä®Êç¢Ë°åÔºåÊúÄÂ§ßÂÆΩÂ∫¶‰∏çÊ∫¢Âá∫ */
  .prose {
    @apply break-words max-w-3xl w-full;
    word-break: break-word;
    overflow-wrap: break-word;
  }

  article {
    p {
      @apply my-4 leading-relaxed;
    }

    /* Â§öÂõæËá™Âä®ÂàÜÊ†è */
    p:has(> img:nth-child(2)):not(:has(> :not(img))) {
      column-count: 2;
      column-gap: 8px;
      margin: 6px 0;
    }
    p:has(> img:nth-child(3)):not(:has(> :not(img))) { column-count: 3; }
    p:has(> img:nth-child(4)):not(:has(> :not(img))) { column-count: 4; }
    p:has(> img:nth-child(5)):not(:has(> :not(img))) { column-count: 5; }
    p:has(> img:nth-child(6)):not(:has(> :not(img))) { column-count: 4; }

    h1 {
      @apply my-4 text-xl font-bold dark:text-white;
    }
    h1::before {
      @apply inline-block h-6 text-red-700 mr-2 text-lg;
      content: "#";
    }
    h2 {
      @apply my-4 text-lg font-bold dark:text-white;
    }
    h2::before {
      @apply inline-block text-red-700 mr-2 text-lg;
      content: "##";
    }
    h3,
    h4,
    h5,
    h6 {
      @apply my-4 font-bold dark:text-white;
    }
    h3::before {
      @apply inline-block text-red-700 mr-2 text-lg;
      content: "###";
    }
    h4::before {
      @apply inline-block text-red-700 mr-2 text-lg;
      content: "####";
    }
    :not(pre) > code {
      @apply whitespace-nowrap rounded border bg-zinc-200/50 px-1 py-0.5 font-mono text-sm font-medium text-black dark:border-zinc-700 dark:bg-zinc-800/50 dark:text-white;
    }
    pre:has(code) {
      @apply my-4 max-h-[600px] overflow-auto rounded-lg border p-4 font-mono text-sm font-medium dark:border-zinc-700;
      /* Ê®™ÂêëÊªöÂä®ÔºåÈò≤Ê≠¢Ê∫¢Âá∫ */
      overflow-x: auto;
    }
    img {
      @apply my-4 rounded-lg border dark:border-zinc-700;
      max-width: 100%;
      height: auto;
      display: block;
    }
    video {
      @apply my-4 rounded-lg border dark:border-zinc-700;
      max-width: 100%;
      display: block;
    }
    blockquote {
      @apply my-4 border-l-2 pl-4;
    }
    a {
      @apply text-red-700 underline break-all;
      word-break: break-all;
    }
    table {
      @apply my-4 w-full table-auto border-collapse text-sm;
      overflow-x: auto;
      display: block;
      th {
        @apply border-b p-4 text-left font-medium dark:border-zinc-700;
      }
      td {
        @apply border-b bg-zinc-50 p-4 dark:border-zinc-700 dark:bg-zinc-800;
      }
    }
    ol {
      @apply my-1 list-inside list-decimal space-y-1 [&_ol]:pl-5 [&_ul]:pl-5;
    }
    ul {
      @apply my-1 list-inside list-disc space-y-1 [&_ol]:pl-5 [&_ul]:pl-5;
    }
    kbd {
      @apply rounded border border-b-2 bg-zinc-100 px-1 py-0.5 font-mono text-xs font-medium text-black dark:border-zinc-700 dark:bg-zinc-800 dark:text-white;
    }
    mark {
      @apply dark:bg-yellow-500/50 dark:text-white;
    }
  }
}

/* ÂÖ®Â±ÄÈìæÊé•Ê†∑Âºè */
a {
  @apply text-red-700 no-underline break-all;
  word-break: break-all;
}

/* Callout Ê†∑Âºè */
[data-callout] {
  @apply border-l-2 pl-4 text-sm my-4;
  position: relative;
  word-break: break-word;
  overflow-wrap: break-word;
}

[data-callout] *{
  margin: 0;
  padding: 0;
}

[data-callout-title] {
  @apply text-sm font-bold mb-1 flex items-center;
}
[data-callout-body] {
  @apply h-fit;
}
[data-callout-type="note"] {
  border-color: rgba(245, 158, 66, 0.5) !important;
}
[data-callout-type="note"] [data-callout-title] {
  color: #92400e;
}
[data-callout-type="note"] [data-callout-title]::before {
  /* content: "üìù"; */
  /* margin-right: 0.5em; */
}
[data-callout-type="note"] [data-callout-body] {
  color: #92400e;
}
[data-callout-type="tip"] {
  border-color: rgba(34, 197, 94, 0.5) !important;
}
[data-callout-type="tip"] [data-callout-title] {
  color: #15803d;
}
[data-callout-type="tip"] [data-callout-title]::before {
  /* content: "üí°"; */
  /* margin-right: 0.5em; */
}
[data-callout-type="tip"] [data-callout-body] {
  color: #166534;
}
[data-callout-type="important"] {
  border-color: rgba(59, 130, 246, 0.5) !important;
}
[data-callout-type="important"] [data-callout-title] {
  color: #1d4ed8;
}
[data-callout-type="important"] [data-callout-title]::before {
  /* content: "‚ùó"; */
  /* margin-right: 0.5em; */
}
[data-callout-type="important"] [data-callout-body] {
  color: #1e40af;
}
[data-callout-type="warning"] {
  border-color: rgba(245, 158, 66, 0.5) !important;
}
[data-callout-type="warning"] [data-callout-title] {
  color: #92400e;
}
[data-callout-type="warning"] [data-callout-title]::before {
  /* content: "‚ö†Ô∏è"; */
  /* margin-right: 0.5em; */
}
[data-callout-type="warning"] [data-callout-body] {
  color: #92400e;
}
[data-callout-type="caution"] {
  border-color: rgba(239, 68, 68, 0.5) !important;
}
[data-callout-type="caution"] [data-callout-title] {
  color: #b91c1c;
}
[data-callout-type="caution"] [data-callout-title]::before {
  /* content: "üöß"; */
  /* margin-right: 0.5em; */
}
[data-callout-type="caution"] [data-callout-body] {
  color: #b91c1c;
}

.katex-html {
  @apply text-sm overflow-x-auto;
}